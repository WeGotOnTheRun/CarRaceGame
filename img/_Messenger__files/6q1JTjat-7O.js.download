if (self.CavalryLogger) { CavalryLogger.start_js(["AHwlh"]); }

__d("CampfireLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONSUME_READER_DRAFT:"consume_reader_draft",CONSUME_READER_PUBLISHED_NOTE:"consume_reader_published_note",CONSUME_READER_EXIT_DRAFT:"consume_reader_exit_draft",CONSUME_READER_EXIT_PUBLISHED:"consume_reader_exit_published",CONSUME_PERMALINK_DRAFT:"consume_permalink_draft",CONSUME_PERMALINK_PUBLISHED_NOTE:"consume_permalink_published_note",CONSUME_PERMALINK_EXIT_DRAFT:"consume_permalink_exit_draft",CONSUME_PERMALINK_EXIT_PUBLISHED:"consume_permalink_exit_published",CONSUME_AS_INSTANT_ARTICLE:"consume_as_instant_article",COMPOSE_CREATE_DRAFT:"compose_create_draft",COMPOSE_EDIT_DRAFT:"compose_edit_draft",COMPOSE_DELETE_DRAFT:"compose_delete_draft",COMPOSE_PUBLISH_DRAFT:"compose_publish_draft",COMPOSE_EDIT_PUBLISHED_NOTE:"compose_edit_published_note",COMPOSE_UPDATE_PUBLISHED_NOTE:"compose_update_published_note",COMPOSE_DELETE_PUBLISHED_NOTE:"compose_delete_published_note",COMPOSE_EXIT_COMPOSER:"compose_exit_composer"})}),null);
__d("CampfireLoggerNoteTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CAMPFIRE:"campfire",MOBILE_CAMPFIRE:"mobile_campfire",OLD:"old"})}),null);
__d("CampfireTimeSpentMonitor",["BanzaiLogger","CampfireLoggerEvents","CampfireLoggerNoteTypes","Run"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){this.$CampfireTimeSpentMonitor1=i;this.$CampfireTimeSpentMonitor2=j;c("Run").onBeforeUnload(this.$CampfireTimeSpentMonitor4.bind(this));this.$CampfireTimeSpentMonitor3=Date.now()}h.prototype.$CampfireTimeSpentMonitor4=function(){var i=Date.now(),j=Math.round((i-this.$CampfireTimeSpentMonitor3)/1e3);c("BanzaiLogger").log("CampfireNotesLoggerConfig",{event:c("CampfireLoggerEvents").CONSUME_PERMALINK_EXIT_PUBLISHED,event_time:i,note_id:Number(this.$CampfireTimeSpentMonitor1),note_type:c("CampfireLoggerNoteTypes").CAMPFIRE,author_id:Number(this.$CampfireTimeSpentMonitor2.ownerID),is_author_verified:this.$CampfireTimeSpentMonitor2.isAuthorVerified,is_author_page:this.$CampfireTimeSpentMonitor2.isAuthorPage,time_spent_reading_sec:j})};f.exports=h}),null);
__d("SpotlightViewerAutoResize",["invariant","Event","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j){"use strict";this.$SpotlightViewerAutoResize1=j;typeof this.$SpotlightViewerAutoResize1.onResize==="function"||h(0)}i.prototype.enable=function(){"use strict";this.$SpotlightViewerAutoResize2=new(c("SubscriptionsHandler"))();this.$SpotlightViewerAutoResize2.addSubscriptions(c("Event").listen(window,"resize",this.$SpotlightViewerAutoResize1.onResize))};i.prototype.disable=function(){"use strict";this.$SpotlightViewerAutoResize2.release();delete this.$SpotlightViewerAutoResize2};f.exports=i}),null);
__d("SpotlightViewerBehaviorsMixin",["BehaviorsMixin"],(function a(b,c,d,e,f,g){var h={componentWillMount:function i(){this.behaviors&&this.enableBehaviors(this.behaviors)},componentWillUnmount:function i(){this.destroyBehaviors()}};Object.assign(h,c("BehaviorsMixin"));f.exports=h}),null);
__d("SpotlightViewerPageWithKeys",["KeyEventController","SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$SpotlightViewerPageWithKeys1=i}h.prototype.enable=function(){"use strict";this.$SpotlightViewerPageWithKeys2=new(c("SubscriptionsHandler"))();this.$SpotlightViewerPageWithKeys2.addSubscriptions(c("KeyEventController").registerKey("LEFT",function(){this.$SpotlightViewerPageWithKeys1.viewState.backward();return false}.bind(this)),c("KeyEventController").registerKey("RIGHT",function(){this.$SpotlightViewerPageWithKeys1.viewState.forward();return false}.bind(this)))};h.prototype.disable=function(){"use strict";this.$SpotlightViewerPageWithKeys2.release();delete this.$SpotlightViewerPageWithKeys2};f.exports=h}),null);
__d("SpotlightViewerPagers",["cx","LeftRight.react","Link.react","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";return c("React").createElement(c("LeftRight.react"),null,c("React").createElement(c("Link.react"),{className:"_4-oa _4-ob _50-m"}),c("React").createElement(c("Link.react"),{className:"_4-oa _4-oc _50-m"}))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("SpotlightSnowflakePhotoViewer",["ArbiterMixin","React","SpotlightViewer","SpotlightViewerAutoResize","SpotlightViewerBehaviorsMixin","SpotlightViewerClose","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","SpotlightViewerPagers","SpotlightViewerPageWithKeys","SpotlightViewerThumbnailMixin","SpotlightViewport","SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").createClass({displayName:"SpotlightSnowflakePhotoViewer",mixins:[c("ArbiterMixin"),c("SpotlightViewerBehaviorsMixin"),c("SpotlightViewerCoreMixin"),c("SpotlightViewerThumbnailMixin"),c("SpotlightViewerDimensionMixin")],behaviors:[c("SpotlightViewerPageWithKeys"),c("SpotlightViewerAutoResize")],getViewerID:function i(){return"photoviewer"},componentWillUnmount:function i(){this._subscriptions&&this._subscriptions.release();this._subscriptions=null},getInitialState:function i(){this._subscriptions=new(c("SubscriptionsHandler"))();return{photoData:this._getInitialPhotoData(),open:true}},_enableSubscriptions:function i(){this.props.useloadingindicator&&this._subscriptions.addSubscriptions(this.viewState.subscribe("photo_fetch",this.setState.bind(this,{photoData:null},null)))},render:function i(){var j=this.getMedia(),k=this.getStageDimensions(),l=this.props.useloadingindicator&&!this.state.photoData;return c("React").createElement(c("SpotlightViewer"),{open:this.state.open,onHide:this.close},c("React").createElement(c("SpotlightViewport"),{media:j,showLoadingIndicator:l,stageDimensions:k,onClick:this._onClickViewport},c("React").createElement(c("SpotlightViewerClose"),{onClick:this.close}),this.props.disablepaging?null:c("React").createElement(c("SpotlightViewerPagers"),null)))}});f.exports=h}),null);
__d("CampfireImageViewer",["DOM","Event","React","ReactDOM","SpotlightSnowflakePhotoViewer","ge"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={registerPopup:function i(j,k){c("Event").listen(j,"click",function(l){h.bootstrap({src:k.src,fbid:k.id,dimensions:[k.width,k.height].join(","),disablePaging:true})})},bootstrap:function i(j){var k=c("React").createElement(c("SpotlightSnowflakePhotoViewer"),{dimensions:[j.dimensions],open:true,disablepaging:true,photoid:j.fbid,reverse:false,rootClassName:j.rootClassName,thumbsrc:j.src});h.render(k)},render:function i(j){var k=c("ge")("campfire_viewer");if(!k){k=c("DOM").create("div",{id:"messages_viewer"});document.body.appendChild(k)}j=c("ReactDOM").render(j,k);j.subscribeOnce("close",function(){c("ReactDOM").unmountComponentAtNode(k)})}};f.exports=h}),null);